# Червоно-чорне дерево

Червоно-чорне дерево - це різновид самобалансуючого бінарного пошукового
дерева у комп'ютерних науках. Кожен вузол бінарного дерева має
додатковий біт, і цей біт часто інтерпретується як
колір (червоний або чорний) вузла. Ці біти кольору використовуються
для того, щоб гарантувати, що дерево залишається приблизно збалансованим під час
вставок та вилучень.

Баланс зберігається шляхом зафарбовування кожного вузла дерева
одним з двох кольорів у спосіб, що задовольняє певним властивостям,
які в сукупності обмежують те, наскільки незбалансованим може
дерево може стати незбалансованим у найгіршому випадку. Коли дерево модифікується, нове дерево
нове дерево згодом переставляється і перефарбовується, щоб
щоб відновити властивості розфарбовування. Властивості
розроблені таким чином, щоб це перегрупування і перефарбовування
можна було виконати ефективно.

Балансування дерева не є досконалим, але воно є достатньо хорошим
достатньо, щоб гарантувати пошук за `O(log n)` час,
де `n` - загальна кількість елементів у дереві.
Операції вставки та видалення, а також перестановки та перефарбування дерева
перегрупуванням та перефарбуванням дерева, також виконуються
за `O(log n)` час.

Приклад червоно-чорного дерева:

![red-black tree](https://upload.wikimedia.org/wikipedia/commons/6/66/Red-black_tree_example.svg)

## Властивості

На додаток до вимог, що накладаються на бінарне дерево пошуку
червоно-чорне дерево повинно задовольняти наступним вимогам:

- Кожен вузол або червоний, або чорний.
- Корінь чорний. Це правило іноді опускається.
  Оскільки корінь завжди можна змінити з червоного на чорний,
  але не обов'язково навпаки, це правило мало
  впливає на аналіз.
- Всі листки (NIL) чорні.
- Якщо вершина червона, то обидва її нащадки чорні.
- Кожен шлях від заданої вершини до будь-якого її нащадка
  NIL вершин містить однакову кількість чорних вершин.

Деякі визначення: кількість чорних вершин від кореня
до вершини є **глибиною чорного кольору** вершини; рівномірна
кількість чорних вершин на всіх шляхах від кореня до листя
називається **чорною висотою** червоно-чорного дерева.

Ці обмеження посилюють критичну властивість червоно-чорних
дерев: _шлях від кореня до найвіддаленішого листка не більше ніж удвічі довший за шлях від кореня до найближчого листка_.
В результаті дерево є приблизно збалансованим за висотою.
Оскільки такі операції, як вставка, видалення та пошук
значень вимагають у найгіршому випадку часу, пропорційного висоті
дерева, ця теоретична верхня межа висоти
дозволяє червоно-чорним деревам бути ефективними у найгіршому випадку,
на відміну від звичайних бінарних дерев пошуку.

## Балансування під час вставки

### Якщо дядько ЧЕРВОНИЙ

![Red Black Tree Balancing](https://www.geeksforgeeks.org/wp-content/uploads/redBlackCase2.png)

### Якщо дядько ЧОРНИЙ

- Вліво-вліво випадок (`p` - лівий нащадок `g` і `x` - лівий нащадок `p`)
- Вліво-вправо випадок (`p` - лівий нащадок `g` і `x` - правий нащадок `p`)
- Вправо-вправо випадок (`p` є правим нащадком `g` і `x` є правим нащадком `p`)
- Вправо-вліво випадок (`p` є правим нащадком `g` і `x` є лівим нащадком `p`)

#### Вліво-вліво випадок (див. g, p та x)

![Red Black Tree Balancing](https://www.geeksforgeeks.org/wp-content/uploads/redBlackCase3a1.png)

#### Вліво-вправо випадок (див. g, p та x)

![Red Black Tree Balancing](https://www.geeksforgeeks.org/wp-content/uploads/redBlackCase3b.png)

#### Вправо-вправо випадок (див. g, p та x)

![Red Black Tree Balancing](https://www.geeksforgeeks.org/wp-content/uploads/redBlackCase3c.png)

#### Вправо-вліво випадок (див. g, p та x)

![Red Black Tree Balancing](https://www.geeksforgeeks.org/wp-content/uploads/redBlackCase3d.png)

## Посилання

- [Wikipedia](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)
- [Red Black Tree Insertion by Tushar Roy (YouTube)](https://www.youtube.com/watch?v=UaLIHuR1t8Q&list=PLLXdhg_r2hKA7DPDsunoDZ-Z769jWn4R8&index=63)
- [Red Black Tree Deletion by Tushar Roy (YouTube)](https://www.youtube.com/watch?v=CTvfzU_uNKE&t=0s&list=PLLXdhg_r2hKA7DPDsunoDZ-Z769jWn4R8&index=64)
- [Red Black Tree Insertion on GeeksForGeeks](https://www.geeksforgeeks.org/red-black-tree-set-2-insert/)
- [Red Black Tree Interactive Visualisations](https://www.cs.usfca.edu/~galles/visualization/RedBlack.html)
